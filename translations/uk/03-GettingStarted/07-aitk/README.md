<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "98bcd044860716da5819e31c152813b7",
  "translation_date": "2025-08-18T23:03:16+00:00",
  "source_file": "03-GettingStarted/07-aitk/README.md",
  "language_code": "uk"
}
-->
# Використання сервера з розширенням AI Toolkit для Visual Studio Code

Коли ви створюєте AI-агента, справа не лише в тому, щоб генерувати розумні відповіді; важливо також надати вашому агенту можливість виконувати дії. Саме тут на допомогу приходить Протокол Контексту Моделі (Model Context Protocol, MCP). MCP дозволяє агентам легко отримувати доступ до зовнішніх інструментів і сервісів у стандартизований спосіб. Уявіть, що це як підключення вашого агента до набору інструментів, якими він *дійсно* може користуватися.

Наприклад, ви підключаєте агента до сервера MCP-калькулятора. Раптом ваш агент може виконувати математичні операції, просто отримуючи запит, як-от: «Скільки буде 47 помножити на 89?»—без необхідності жорстко прописувати логіку чи створювати спеціальні API.

## Огляд

У цьому уроці розглядається, як підключити сервер MCP-калькулятора до агента за допомогою розширення [AI Toolkit](https://aka.ms/AIToolkit) у Visual Studio Code, що дозволить вашому агенту виконувати математичні операції, такі як додавання, віднімання, множення та ділення, використовуючи природну мову.

AI Toolkit — це потужне розширення для Visual Studio Code, яке спрощує розробку агентів. Інженери зі штучного інтелекту можуть легко створювати AI-додатки, розробляючи та тестуючи генеративні моделі штучного інтелекту — локально або в хмарі. Розширення підтримує більшість основних генеративних моделей, доступних сьогодні.

*Примітка*: AI Toolkit наразі підтримує Python і TypeScript.

## Навчальні цілі

До кінця цього уроку ви зможете:

- Використовувати сервер MCP через AI Toolkit.
- Налаштовувати конфігурацію агента для виявлення та використання інструментів, наданих сервером MCP.
- Використовувати інструменти MCP через природну мову.

## Підхід

Ось як ми будемо діяти на високому рівні:

- Створити агента та визначити його системний запит.
- Створити сервер MCP з інструментами калькулятора.
- Підключити Agent Builder до сервера MCP.
- Протестувати виклик інструментів агента через природну мову.

Чудово, тепер, коли ми розуміємо загальний процес, давайте налаштуємо AI-агента для використання зовнішніх інструментів через MCP, розширюючи його можливості!

## Попередні вимоги

- [Visual Studio Code](https://code.visualstudio.com/)
- [AI Toolkit для Visual Studio Code](https://aka.ms/AIToolkit)

## Вправа: Використання сервера

> [!WARNING]
> Примітка для користувачів macOS. Ми наразі досліджуємо проблему, яка впливає на встановлення залежностей у macOS. Через це користувачі macOS поки що не зможуть завершити цей урок. Ми оновимо інструкції, щойно буде доступне рішення. Дякуємо за ваше терпіння та розуміння!

У цій вправі ви створите, запустите та вдосконалите AI-агента з інструментами сервера MCP у Visual Studio Code за допомогою AI Toolkit.

### -0- Попередній крок: додайте модель OpenAI GPT-4o до списку My Models

У цій вправі використовується модель **GPT-4o**. Модель має бути додана до списку **My Models** перед створенням агента.

1. Відкрийте розширення **AI Toolkit** з **Панелі активності**.
1. У розділі **Catalog** виберіть **Models**, щоб відкрити **Каталог моделей**. Вибір **Models** відкриє **Каталог моделей** у новій вкладці редактора.
1. У рядку пошуку **Каталогу моделей** введіть **OpenAI GPT-4o**.
1. Натисніть **+ Add**, щоб додати модель до списку **My Models**. Переконайтеся, що ви вибрали модель, яка **Hosted by GitHub**.
1. У **Панелі активності** переконайтеся, що модель **OpenAI GPT-4o** з’явилася у списку.

### -1- Створення агента

**Agent (Prompt) Builder** дозволяє створювати та налаштовувати власних агентів зі штучним інтелектом. У цьому розділі ви створите нового агента та призначите модель для забезпечення розмови.

1. Відкрийте розширення **AI Toolkit** з **Панелі активності**.
1. У розділі **Tools** виберіть **Agent (Prompt) Builder**. Вибір **Agent (Prompt) Builder** відкриє його у новій вкладці редактора.
1. Натисніть кнопку **+ New Agent**. Розширення запустить майстер налаштування через **Command Palette**.
1. Введіть ім’я **Calculator Agent** і натисніть **Enter**.
1. У **Agent (Prompt) Builder**, у полі **Model**, виберіть модель **OpenAI GPT-4o (via GitHub)**.

### -2- Створення системного запиту для агента

Після створення основи агента настав час визначити його особистість і мету. У цьому розділі ви скористаєтеся функцією **Generate system prompt**, щоб описати поведінку агента — у цьому випадку калькулятора — і дозволити моделі створити системний запит для вас.

1. У розділі **Prompts** натисніть кнопку **Generate system prompt**. Ця кнопка відкриє конструктор запитів, який використовує AI для створення системного запиту для агента.
1. У вікні **Generate a prompt** введіть наступне: `Ви корисний і ефективний математичний асистент. Коли вам дають задачу, що включає базову арифметику, ви відповідаєте правильним результатом.`
1. Натисніть кнопку **Generate**. У нижньому правому куті з’явиться сповіщення, яке підтверджує, що системний запит створюється. Після завершення створення запиту він з’явиться у полі **System prompt** у **Agent (Prompt) Builder**.
1. Перегляньте **System prompt** і за потреби відредагуйте.

### -3- Створення сервера MCP

Тепер, коли ви визначили системний запит вашого агента, який спрямовує його поведінку та відповіді, настав час забезпечити агента практичними можливостями. У цьому розділі ви створите сервер MCP-калькулятора з інструментами для виконання операцій додавання, віднімання, множення та ділення. Цей сервер дозволить вашому агенту виконувати математичні операції в реальному часі у відповідь на запити природною мовою.

AI Toolkit оснащений шаблонами для спрощення створення власного сервера MCP. Ми використаємо шаблон Python для створення сервера MCP-калькулятора.

*Примітка*: AI Toolkit наразі підтримує Python і TypeScript.

1. У розділі **Tools** у **Agent (Prompt) Builder** натисніть кнопку **+ MCP Server**. Розширення запустить майстер налаштування через **Command Palette**.
1. Виберіть **+ Add Server**.
1. Виберіть **Create a New MCP Server**.
1. Виберіть **python-weather** як шаблон.
1. Виберіть **Default folder**, щоб зберегти шаблон сервера MCP.
1. Введіть наступну назву для сервера: **Calculator**.
1. У новому вікні Visual Studio Code виберіть **Yes, I trust the authors**.
1. Використовуючи термінал (**Terminal** > **New Terminal**), створіть віртуальне середовище: `python -m venv .venv`.
1. У терміналі активуйте віртуальне середовище:
    - Windows - `.venv\Scripts\activate`
    - macOS/Linux - `source .venv/bin/activate`
1. У терміналі встановіть залежності: `pip install -e .[dev]`.
1. У поданні **Explorer** у **Панелі активності** розгорніть каталог **src** і виберіть **server.py**, щоб відкрити файл у редакторі.
1. Замініть код у файлі **server.py** наступним і збережіть:

    ```python
    """
    Sample MCP Calculator Server implementation in Python.

    
    This module demonstrates how to create a simple MCP server with calculator tools
    that can perform basic arithmetic operations (add, subtract, multiply, divide).
    """
    
    from mcp.server.fastmcp import FastMCP
    
    server = FastMCP("calculator")
    
    @server.tool()
    def add(a: float, b: float) -> float:
        """Add two numbers together and return the result."""
        return a + b
    
    @server.tool()
    def subtract(a: float, b: float) -> float:
        """Subtract b from a and return the result."""
        return a - b
    
    @server.tool()
    def multiply(a: float, b: float) -> float:
        """Multiply two numbers together and return the result."""
        return a * b
    
    @server.tool()
    def divide(a: float, b: float) -> float:
        """
        Divide a by b and return the result.
        
        Raises:
            ValueError: If b is zero
        """
        if b == 0:
            raise ValueError("Cannot divide by zero")
        return a / b
    ```

### -4- Запуск агента з сервером MCP-калькулятора

Тепер, коли ваш агент має інструменти, настав час їх використати! У цьому розділі ви надішлете запити агенту, щоб протестувати та перевірити, чи використовує агент відповідний інструмент із сервера MCP-калькулятора.

1. Натисніть `F5`, щоб запустити налагодження сервера MCP. **Agent (Prompt) Builder** відкриється у новій вкладці редактора. Статус сервера буде видно в терміналі.
1. У полі **User prompt** у **Agent (Prompt) Builder** введіть наступний запит: `Я купив 3 предмети за ціною $25 кожен, а потім використав знижку $20. Скільки я заплатив?`
1. Натисніть кнопку **Run**, щоб згенерувати відповідь агента.
1. Перегляньте результат агента. Модель має дійти висновку, що ви заплатили **$55**.
1. Ось що має відбутися:
    - Агент вибирає інструменти **multiply** і **subtract** для допомоги у розрахунках.
    - Відповідні значення `a` і `b` призначаються для інструмента **multiply**.
    - Відповідні значення `a` і `b` призначаються для інструмента **subtract**.
    - Відповідь від кожного інструмента надається у відповідному **Tool Response**.
    - Остаточний результат моделі надається у фінальному **Model Response**.
1. Надішліть додаткові запити, щоб ще більше протестувати агента. Ви можете змінити існуючий запит у полі **User prompt**, натиснувши на поле та замінивши існуючий запит.
1. Коли ви завершите тестування агента, ви можете зупинити сервер через **термінал**, ввівши **CTRL/CMD+C**, щоб завершити.

## Завдання

Спробуйте додати додатковий інструмент до вашого файлу **server.py** (наприклад, для обчислення квадратного кореня числа). Надішліть додаткові запити, які вимагатимуть від агента використання вашого нового інструмента (або існуючих інструментів). Обов’язково перезапустіть сервер, щоб завантажити нові інструменти.

## Рішення

[Рішення](./solution/README.md)

## Основні висновки

Основні висновки цього розділу:

- Розширення AI Toolkit — це чудовий клієнт, який дозволяє використовувати сервери MCP та їх інструменти.
- Ви можете додавати нові інструменти до серверів MCP, розширюючи можливості агента для задоволення нових вимог.
- AI Toolkit включає шаблони (наприклад, шаблони серверів MCP на Python), які спрощують створення власних інструментів.

## Додаткові ресурси

- [Документація AI Toolkit](https://aka.ms/AIToolkit/doc)

## Що далі
- Далі: [Тестування та налагодження](../08-testing/README.md)

**Відмова від відповідальності**:  
Цей документ було перекладено за допомогою сервісу автоматичного перекладу [Co-op Translator](https://github.com/Azure/co-op-translator). Хоча ми прагнемо до точності, зверніть увагу, що автоматичні переклади можуть містити помилки або неточності. Оригінальний документ мовою оригіналу слід вважати авторитетним джерелом. Для критично важливої інформації рекомендується професійний переклад людиною. Ми не несемо відповідальності за будь-які непорозуміння або неправильні тлумачення, що виникли внаслідок використання цього перекладу.